(this.webpackJsonpcloudgram=this.webpackJsonpcloudgram||[]).push([[0],{147:function(e,t,n){e.exports={Name:"LandingIntro_Name__H6N1E",Intro:"LandingIntro_Intro__Jtn76"}},148:function(e,t,n){e.exports={ImageGrid:"ImageGrid_ImageGrid__1cSAf",Image:"ImageGrid_Image__-_SGB"}},226:function(e,t,n){e.exports={App:"App_App__1VHv9",H3:"App_H3__rRqoP"}},227:function(e,t,n){e.exports={BackgroundImage:"BackgroundImage_BackgroundImage__rUsbM"}},229:function(e,t,n){e.exports={Signin:"Signin_Signin__kDmPZ"}},230:function(e,t,n){e.exports={Button:"Button_Button__GP3H5"}},231:function(e,t,n){e.exports={Input:"Input_Input__2RQo4"}},232:function(e,t,n){e.exports={Signup:"Signup_Signup__24YIz"}},233:function(e,t,n){e.exports={Cloudgram:"Cloudgram_Cloudgram__1dutN"}},240:function(e,t,n){},28:function(e,t,n){e.exports={Modal:"ModalSharing_Modal__2Qfar",ModalSharing:"ModalSharing_ModalSharing__2pLbd",selectedImage:"ModalSharing_selectedImage__2h-HV",Controls:"ModalSharing_Controls__2njIT",button:"ModalSharing_button__2pyzw",Modimg:"ModalSharing_Modimg__39ris"}},43:function(e,t,n){e.exports={Header:"Toolbar_Header__BO0BE",NavLink:"Toolbar_NavLink__1WtYe",active:"Toolbar_active__2s3M8"}},443:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(2),c=n(1),i=n.n(c),s=n(93),o=n.n(s),u=(n(240),n(226)),l=n.n(u),d=n(227),j=n.n(d),g=function(){return Object(r.jsx)("div",{className:j.a.BackgroundImage})},m=n(43),b=n.n(m),O=n(12),h=n(34),p=Object(O.b)((function(e){var t;return{isLoggedIn:e.firebase.auth.uid,name:null===(t=e.auth.userData)||void 0===t?void 0:t.name}}),(function(e){return{signOut:function(){return e((function(e,t,n){(0,n.getFirebase)().auth().signOut().then((function(){e({type:"SIGNOUT_SUCCESS"})}))}))}}}))((function(e){var t=e.isLoggedIn,n=e.name,a=e.signOut;return Object(r.jsxs)("header",{className:b.a.Header,children:[Object(r.jsx)("h2",{children:Object(r.jsx)(h.b,{className:b.a.NavLink,to:"/cloudgram",id:"cloudgram",children:"Cloudgram"})}),Object(r.jsx)("nav",{children:Object(r.jsxs)("ul",{children:[!t&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("li",{children:Object(r.jsx)(h.b,{to:"/login",id:"login",className:b.a.NavLink,children:"Login"})}),Object(r.jsx)("li",{children:Object(r.jsx)(h.b,{to:"/signup",id:"signup",className:b.a.NavLink,children:"Signup"})})]}),t&&Object(r.jsxs)(r.Fragment,{children:[n&&Object(r.jsx)("li",{className:b.a.NavLink,children:n.toUpperCase()}),Object(r.jsxs)("li",{children:[" ",Object(r.jsx)(h.b,{to:"/login",id:"logout",onClick:function(){return a()},className:b.a.NavLink,children:"Logout"})]})]})]})})]})})),f=n(8),_=n(54),S=n(11),E=n(229),I=n.n(E),x=n(230),C=n.n(x),v=function(e){return Object(r.jsx)("button",{className:C.a.Button,type:e.type,onClick:function(t){return e.onClick(t)},children:e.children})},R=n(231),A=n.n(R),N=function(e){return Object(r.jsx)("input",{className:A.a.Input,type:e.type,onChange:e.onChange,id:e.name,name:e.name,placeholder:e.name})},G=Object(O.b)((function(e){return{authError:e.auth.authError}}),(function(e){return{signIn:function(t){return e(function(e){return function(t,n,a){var r=(0,a.getFirebase)();r.auth().signInWithEmailAndPassword(e.email,e.password).then((function(e){r.firestore().collection("users").doc(e.user.uid).get().then((function(e){return t({type:"SIGN_IN_SUCCESS",data:e.data()})})).catch((function(e){return console.log(e)}))})).catch((function(e){t({type:"SIGN_IN_ERROR",err:e})}))}}(t))},googleSignIn:function(){return e((function(e,t,n){var a=(0,n.getFirebase)(),r=a.auth(),c=a.firestore(),i=new a.auth.GoogleAuthProvider;r.signInWithPopup(i).then((function(t){var n=t.user.uid,a={email:t.user.email,name:t.user.displayName};c.collection("users").doc(t.user.uid).get().then((function(t){t.data()?e({type:"GOOGLE_LOGIN_SUCCESS",data:t.data()}):(r.sendPasswordResetEmail(a.email),c.collection("users").doc(n).set(a).then((function(t){e({type:"GOOGLE_LOGIN_SUCCESS",data:a})})))}))})).catch((function(t){e({type:"GOOGLE_LOGIN_ERROR",err:t})}))}))}}}))((function(e){var t=e.authError,n=e.signIn,i=e.googleSignIn,s=Object(c.useState)({email:"",password:""}),o=Object(S.a)(s,2),u=o[0],l=o[1],d=function(e){l(Object(a.a)(Object(a.a)({},u),{},Object(_.a)({},e.target.id,e.target.value)))};return Object(r.jsxs)("div",{className:I.a.Signin,children:[Object(r.jsx)("h3",{children:"Sign in to Your Account"}),Object(r.jsxs)("form",{children:[Object(r.jsx)(N,{type:"email",name:"email",onChange:d}),Object(r.jsx)(N,{type:"password",name:"password",onChange:d}),Object(r.jsx)(v,{type:"submit",onClick:function(e){e.preventDefault(),n(u)},children:"Signin"}),t?Object(r.jsx)("p",{children:t}):null]}),Object(r.jsx)("p",{children:"OR"}),Object(r.jsx)(v,{onClick:function(){return i()},children:"Sign In With Google"})]})})),y=n(232),U=n.n(y),P=Object(O.b)((function(e){return{signupError:e.auth.signupError}}),(function(e){return{signUp:function(t){return e((n=t,function(e,t,a){var r=(0,a.getFirebase)();r.auth().createUserWithEmailAndPassword(n.email,n.password).then((function(t){r.firestore().collection("users").doc(t.user.uid).set({name:n.fullname,email:n.email}).then((function(t){e({type:"SIGNUP_SUCCESS",data:n})})).catch((function(e){console.log(e)}))})).catch((function(t){console.log(t.message),e({type:"SIGNUP_ERROR",err:t})}))}));var n}}}))((function(e){var t=e.signUp,n=e.signupError,i=Object(c.useState)({email:"",password:"",fullname:""}),s=Object(S.a)(i,2),o=s[0],u=s[1],l=Object(c.useState)(null),d=Object(S.a)(l,2),j=d[0],g=d[1],m=function(e){u(Object(a.a)(Object(a.a)({},o),{},Object(_.a)({},e.target.name,e.target.value)))};return Object(r.jsxs)("div",{className:U.a.Signup,children:[Object(r.jsx)("h3",{children:"Create an Account"}),Object(r.jsxs)("form",{children:[Object(r.jsx)(N,{type:"text",name:"fullname",onChange:m}),Object(r.jsx)(N,{type:"email",name:"email",onChange:m}),Object(r.jsx)(N,{type:"password",name:"password",onChange:m}),Object(r.jsx)(v,{type:"submit",onClick:function(e){e.preventDefault();for(var n=Object.values(o),a=!0,r=0;r<n.length;r++)n[r]||(a=!1);a&&g(null),a&&t(o),!a&&g("Form not filled")},children:"Signup"}),n&&Object(r.jsx)("p",{children:n}),j?Object(r.jsx)("p",{children:j}):null]})]})})),T=n(147),M=n.n(T),L=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:M.a.Name,children:[Object(r.jsx)("h1",{children:"CLOUDGRAM"}),Object(r.jsx)("h4",{children:"In these moments, time stood still....."})]}),Object(r.jsxs)("div",{className:M.a.Intro,children:[Object(r.jsx)("p",{children:"Save your captured moments"}),Object(r.jsx)("p",{children:"Share pictures with your friends"}),Object(r.jsx)("p",{children:"Upload unlimited pictures"}),Object(r.jsx)("p",{children:"Caption your photos"})]})]})},F=n(95),k=n.n(F),D=function(e){document.getElementById("root").style.opacity="0.8";return Object(r.jsx)("div",{className:k.a.ModalGallery,onClick:function(t){t.target.classList.contains(k.a.ModalGallery)&&(e.setSelectedImage(null),document.getElementById("root").style.opacity="1")},children:Object(r.jsx)("div",{className:k.a.Container,children:Object(r.jsx)("img",{src:e.selectedImage.imagePath,alt:""})})})},w=n(28),B=n.n(w),H=n(96),W=n.n(H),K=function(e){return function(t,n){var a=n().firebase.auth.email;W.a.get("https://cloudgram.herokuapp.com/api/images").then((function(n){var r=n.data;r=e?r.filter((function(e){return!!e.sharedTo.filter((function(e){return e===a}))[0]})):r.filter((function(e){return e.userEmail===a})),t({type:"GET_IMAGES_SUCCESS",images:r})})).catch((function(e){t({type:"GET_IMAGES_ERROR"})}))}},z=Object(O.b)((function(e){return{users:e.user.users,currentUser:e.firebase.auth.email}}),(function(e){return{getUsers:function(){return e((function(e,t,n){(0,n.getFirebase)().firestore().collection("users").get().then((function(t){var n=t.docs.map((function(e){return e.data()}));n=n.map((function(e){return e.email})),e({type:"GET_USERS_SUCCESS",users:n})})).catch((function(t){console.log(t),e({type:"GET_USERS_ERROR",err:t})}))}))},updateImage:function(t){return e((n=t,function(e,t){W.a.put("https://cloudgram.herokuapp.com/api/images/"+n._id,n).then((function(t){e({type:"UPDATE_IMAGE_SUCCESS",updatedImage:t.data})})).catch((function(t){e({type:"UPDARE_IMAGE_ERROR",err:t})}))}));var n},getImages:function(){return e(K())}}}))((function(e){var t=e.setSharing,n=e.images,i=e.currentUser,s=e.users,o=e.getUsers,u=e.updateImage,l=e.getImages,d=Object(c.useState)(null),j=Object(S.a)(d,2),g=j[0],m=j[1],b=Object(c.useState)(null),O=Object(S.a)(b,2),h=O[0],p=O[1],f=Object(c.useState)(null),_=Object(S.a)(f,2),E=_[0],I=_[1];Object(c.useEffect)((function(){o()}),[]);var x=function(e){if(g){var t=document.getElementsByClassName(B.a.selectedImage);if(t[0]&&t[0].classList.remove(B.a.selectedImage),e._id===g._id)return!0}};return Object(r.jsx)("div",{className:B.a.Modal,onClick:function(e){e.target.classList.contains(B.a.Modal)&&t(!1)},children:Object(r.jsxs)("div",{id:"modalSharing",className:B.a.ModalSharing,children:[Object(r.jsx)("p",{children:E||"Select a single image"}),Object(r.jsxs)("div",{className:B.a.Controls,children:[Object(r.jsx)(N,{onChange:function(e){p(e.target.value)},name:"Email"}),Object(r.jsx)("button",{onClick:function(){if(g)if(h===i||g.sharedTo.includes(h))I("Sharing not allowed");else if(s.includes(h)){var e=g.sharedTo.concat([h]),n=Object(a.a)(Object(a.a)({},g),{},{sharedTo:e});u(n),setTimeout((function(){t(!1),l()}),2e3)}else I("User does not exist!");else I("Please select an Image!")},className:B.a.button,children:"Share"})]}),Object(r.jsx)("div",{className:B.a.Modimg,children:n&&n.map((function(e,t){return Object(r.jsx)("img",{src:e.imagePath,className:x(e)&&B.a.selectedImage,onClick:function(){return m(e)},alt:""},t)}))})]})})})),V=n(69),J=n.n(V),Q=Object(O.b)((function(e){return{uploadError:e.image.err}}),(function(e){return{upload:function(t){return e(function(e){return function(t,n){var a=n().firebase.auth.email,r=new FormData;r.append("imagePath",e),r.append("userEmail",a),W.a.post("https://cloudgram.herokuapp.com/api/images",r).then((function(e){var a=n().image.images;a=[e.data].concat(a),t({type:"IMAGE_UPLOAD_SUCCESS",images:a})})).catch((function(e){t({type:"IMAGE_UPLOAD_ERROR"})}))}}(t))}}}))((function(e){var t=e.upload,n=e.title,a=e.uploadError,i=e.setSharing,s=Object(c.useState)(null),o=Object(S.a)(s,2),u=o[0],l=o[1],d=Object(c.useState)(!1),j=Object(S.a)(d,2),g=j[0],m=j[1];Object(c.useEffect)((function(){m("Show My Images"===n)}),[n]);return Object(c.useEffect)((function(){u&&t(u)}),[u]),Object(r.jsxs)("div",{className:J.a.upload,children:[!g&&Object(r.jsxs)("button",{className:J.a.button,onClick:function(){document.getElementById("upload").click()},children:["Upload Image",Object(r.jsx)("input",{id:"upload",type:"file",accept:"image/jpeg,image/png",className:J.a.imageInput,onChange:function(e){l(e.target.files[0])}})]}),Object(r.jsx)("button",{onClick:function(){i(!0)},className:J.a.button,children:"Share Image"}),a&&Object(r.jsx)("p",{children:a})]})})),Y=n(148),q=n.n(Y),Z=function(e){var t=e.images,n=e.title,a=Object(c.useState)(!1),i=Object(S.a)(a,2),s=i[0],o=i[1],u=Object(c.useState)(null),l=Object(S.a)(u,2),d=l[0],j=l[1];return Object(r.jsxs)("div",{className:q.a.ImageGrid,children:[Object(r.jsx)(Q,{title:n,sharing:s,setSharing:o}),s&&Object(r.jsx)(z,{images:t,setSharing:o}),d&&Object(r.jsx)(D,{selectedImage:d,setSelectedImage:j}),Object(r.jsx)("div",{children:t&&t.map((function(e,t){return Object(r.jsx)("img",{src:e.imagePath,alt:"",className:q.a.Image,onClick:function(){return j(e)}},t)}))})]})},X=n(233),$=n.n(X),ee=Object(O.b)((function(e){return{images:e.image.images}}),(function(e){return{getImages:function(t){return e(K(t))},getProfile:function(){return e((function(e,t,n){var a=(0,n.getFirebase)(),r=t().firebase.auth.uid;a.firestore().collection("users").doc(r).get().then((function(t){e({type:"GET_PROFILE_SUCCESS",data:t.data()})})).catch((function(t){e({type:"GET_PROFILE_ERROR"})}))}))}}}))((function(e){var t=e.images,n=e.getImages,a=e.getProfile,i=Object(c.useState)(""),s=Object(S.a)(i,2),o=s[0],u=s[1],l=Object(c.useState)(!0),d=Object(S.a)(l,2),j=d[0],g=d[1];return Object(c.useEffect)((function(){n(!1),a()}),[]),Object(c.useEffect)((function(){j?(u("Show Shared Images"),n(!1)):(u("Show My Images"),n(!0))}),[j]),Object(r.jsxs)("div",{className:$.a.Cloudgram,children:[Object(r.jsx)(v,{onClick:function(){g(!j)},id:"controlImages",children:o}),Object(r.jsx)("hr",{}),Object(r.jsx)(Z,{title:o,images:t})]})})),te=Object(O.b)((function(e){return{isLoggedIn:e.firebase.auth.uid}}),null)(Object(f.g)((function(e){var t=e.isLoggedIn;return Object(r.jsxs)("div",{className:l.a.App,children:[Object(r.jsx)(p,{}),Object(r.jsx)(g,{}),!t&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(L,{}),Object(r.jsxs)(f.d,{children:[Object(r.jsx)(f.b,{path:"/login",exact:!0,component:G}),Object(r.jsx)(f.b,{path:"/signup",exact:!0,component:P}),Object(r.jsx)(f.a,{from:"/",to:"/cloudgram"})]})]}),t&&Object(r.jsxs)(f.d,{children:[Object(r.jsx)(f.b,{path:"/home",exact:!0,component:ee}),Object(r.jsx)(f.a,{from:"/",to:"/home"})]})]})}))),ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,446)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))},ae=n(33),re={authError:null,userData:null,signupError:null},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GOOGLE_LOGIN_ERROR":return Object(a.a)(Object(a.a)({},e),{},{authError:t.err.message});case"GOOGLE_LOGIN_SUCCESS":case"SIGN_IN_SUCCESS":return Object(a.a)(Object(a.a)({},e),{},{authError:null,userData:t.data});case"SIGN_IN_ERROR":return Object(a.a)(Object(a.a)({},e),{},{authError:t.err.message});case"SIGNOUT_SUCCESS":return Object(a.a)(Object(a.a)({},e),{},{userData:null});case"SIGNUP_SUCCESS":return Object(a.a)(Object(a.a)({},e),{},{authError:null,userData:t.data});case"SIGNUP_ERROR":return Object(a.a)(Object(a.a)({},e),{},{signupError:t.err.message});case"GET_PROFILE_SUCCESS":return Object(a.a)(Object(a.a)({},e),{},{userData:t.data});case"GET_PROFILE_ERROR":default:return e}},ie=n(68),se=n(55),oe={images:[],err:null},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IMAGE_UPLOAD_ERROR":return Object(a.a)(Object(a.a)({},e),{},{err:"Error uploading image"});case"IMAGE_UPLOAD_SUCCESS":case"GET_IMAGES_SUCCESS":return Object(a.a)(Object(a.a)({},e),{},{images:t.images});case"GET_IMAGES_ERROR":return Object(a.a)(Object(a.a)({},e),{},{err:"Error retrieving images"});case"UPDATE_IMAGE_SUCCESS":return e;case"UPDATE_IMAGE_ERROR":return Object(a.a)(Object(a.a)({},e),{},{err:"Sharing failed"});default:return e}},le={users:[]},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USERS_SUCCESS":return Object(a.a)(Object(a.a)({},e),{},{users:t.users});case"GET_USERS_ERROR":return Object(a.a)(Object(a.a)({},e),{},{err:"Error retrieving users"});default:return e}},je=Object(ae.c)({auth:ce,image:ue,user:de,firestore:ie.firestoreReducer,firebase:se.firebaseReducer}),ge=n(234),me=n(35),be=(n(444),n(445),n(441),{apiKey:"AIzaSyCEHF8KCmv2Q9wNZBAzCIAchsVW13eqt34",authDomain:"cloudgram-v2.firebaseapp.com",projectId:"cloudgram-v2",storageBucket:"cloudgram-v2.appspot.com",messagingSenderId:"363404342754",appId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyCEHF8KCmv2Q9wNZBAzCIAchsVW13eqt34",REACT_APP_FIREBASE_APP_ID:"1:363404342754:web:2496e7b8d95bf5cb5975bb",REACT_APP_FIREBASE_AUTH_DOMAIN:"cloudgram-v2.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"363404342754",REACT_APP_FIREBASE_PROJECT_ID:"cloudgram-v2",REACT_APP_FIREBASE_STORAGE_BUCKET:"cloudgram-v2.appspot.com"}).REACT_APP_FIREBASE_API_ID});me.a.initializeApp(be),me.a.firestore().settings({timestampsInSnapshots:!0});me.a.storage(),me.a.firestore.FieldValue.serverTimestamp;var Oe=me.a,he=Object(ae.e)(je,Object(ae.d)(Object(ae.a)(ge.a.withExtraArgument({getFirebase:se.getFirebase,getFirestore:ie.getFirestore,getStorage:Oe.storage()})),Object(ie.reduxFirestore)(Oe))),pe={firebase:me.a,config:be,dispatch:he.dispatch};o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(O.a,{store:he,children:Object(r.jsx)(se.ReactReduxFirebaseProvider,Object(a.a)(Object(a.a)({},pe),{},{children:Object(r.jsx)(h.a,{children:Object(r.jsx)(te,{})})}))})}),document.getElementById("root")),ne()},69:function(e,t,n){e.exports={imageInput:"UploadImage_imageInput__2-Juj",upload:"UploadImage_upload__3Tk5n",button:"UploadImage_button__3O0Yw"}},95:function(e,t,n){e.exports={ModalGallery:"ModalGallery_ModalGallery__1I9QI",Container:"ModalGallery_Container__aNWDM"}}},[[443,1,2]]]);
//# sourceMappingURL=main.abb8b845.chunk.js.map